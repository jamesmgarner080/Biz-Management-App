<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Management - Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <div class="main-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-briefcase"></i>
                    <span>BizManager</span>
                </div>
                
                <div class="user-info">
                    <h4>Logged in as</h4>
                    <p id="userName">Loading...</p>
                    <span class="user-role" id="userRole">Loading...</span>
                </div>
            </div>
            
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-view="dashboard">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-view="tasks">
                            <i class="fas fa-tasks"></i>
                            <span>My Tasks</span>
                            <span class="notification-badge hidden" id="taskBadge">0</span>
                        </a>
                    </li>
                    <li class="nav-item" id="allTasksNav">
                        <a href="#" class="nav-link" data-view="all-tasks">
                            <i class="fas fa-list-check"></i>
                            <span>All Tasks</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-view="schedule">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Schedule</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-view="notifications">
                            <i class="fas fa-bell"></i>
                            <span>Notifications</span>
                            <span class="notification-badge hidden" id="notificationBadge">0</span>
                        </a>
                    </li>
                    <li class="nav-item" id="reportsNav">
                        <a href="#" class="nav-link" data-view="reports">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reports</span>
                        </a>
                    </li>
                       <li class="nav-item" id="stockNav">
                           <a href="#" class="nav-link" data-view="stock">
                               <i class="fas fa-boxes"></i>
                               <span>Stock</span>
                           </a>
                       </li>
                    <li class="nav-item" id="usersNav">
                        <a href="#" class="nav-link" data-view="users">
                            <i class="fas fa-users"></i>
                            <span>Users</span>
                        </a>
                    </li>
                    <li class="nav-item" id="permissionsNav">
                        <a href="#" class="nav-link" data-view="permissions">
                            <i class="fas fa-shield-alt"></i>
                            <span>Permissions</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-view="settings">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view-content">
                <div class="page-header">
                    <h1 class="page-title">Dashboard</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="createTaskBtn">
                            <i class="fas fa-plus"></i>
                            Create Task
                        </button>
                    </div>
                </div>
                
                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon primary">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalTasks">0</h3>
                            <p>Total Tasks</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="completedTasks">0</h3>
                            <p>Completed</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon warning">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="pendingTasks">0</h3>
                            <p>Pending</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon danger">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="overdueTasks">0</h3>
                            <p>Overdue</p>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Tasks -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Recent Tasks</h2>
                        <a href="#" class="btn btn-secondary btn-sm" data-view="tasks">View All</a>
                    </div>
                    <div class="card-body">
                        <div id="recentTasksList" class="task-list">
                            <div class="empty-state">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tasks View -->
            <div id="tasksView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">My Tasks</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="filterTasksBtn">
                            <i class="fas fa-filter"></i>
                            Filter
                        </button>
                    </div>
                </div>
                
                <!-- Filters -->
                <div class="card" id="taskFilters" style="display: none;">
                    <div class="card-body">
                        <div class="filters">
                            <div class="filter-group">
                                <label>Status</label>
                                <select class="form-select" id="filterStatus">
                                    <option value="">All</option>
                                    <option value="pending">Pending</option>
                                    <option value="in-progress">In Progress</option>
                                    <option value="completed">Completed</option>
                                    <option value="overdue">Overdue</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label>Priority</label>
                                <select class="form-select" id="filterPriority">
                                    <option value="">All</option>
                                    <option value="High">High</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label>Category</label>
                                <select class="form-select" id="filterCategory">
                                    <option value="">All</option>
                                    <option value="Daily Bar Duties">Daily Bar Duties</option>
                                    <option value="Staff Training">Staff Training</option>
                                    <option value="Management Duties">Management Duties</option>
                                    <option value="Maintenance">Maintenance</option>
                                    <option value="Cleaning">Cleaning</option>
                                    <option value="Inventory">Inventory</option>
                                    <option value="Customer Service">Customer Service</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            
                            <div class="filter-group" style="align-self: flex-end;">
                                <button class="btn btn-primary" id="applyFiltersBtn">
                                    <i class="fas fa-check"></i>
                                    Apply
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Task List -->
                <div class="card">
                    <div class="card-body">
                        <div id="myTasksList" class="task-list">
                            <div class="empty-state">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- All Tasks View (Management Only) -->
            <div id="allTasksView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">All Tasks</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="createTaskBtn2">
                            <i class="fas fa-plus"></i>
                            Create Task
                        </button>
                        <button class="btn btn-secondary" id="exportTasksBtn">
                            <i class="fas fa-file-pdf"></i>
                            Export PDF
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div id="allTasksList" class="task-list">
                            <div class="empty-state">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Schedule View -->
            <div id="scheduleView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">Schedule</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="createScheduleBtn">
                            <i class="fas fa-plus"></i>
                            Add Shift
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div id="scheduleContent">
                            <p class="text-center text-muted">Schedule view coming soon...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notifications View -->
            <div id="notificationsView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">Notifications</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="markAllReadBtn">
                            <i class="fas fa-check-double"></i>
                            Mark All Read
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div id="notificationsList">
                            <div class="empty-state">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Reports View (Management Only) -->
            <div id="reportsView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">Reports</h1>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Generate Custom Report</h2>
                    </div>
                    <div class="card-body">
                        <form id="reportForm">
                            <div class="form-group">
                                <label class="form-label required">Report Type</label>
                                <select class="form-select" id="reportType" required>
                                    <option value="">Select report type</option>
                                    <option value="tasks">Task Report</option>
                                    <option value="user">User Performance Report</option>
                                    <option value="summary">Summary Report</option>
                                </select>
                            </div>
                            
                            <div id="taskReportOptions" style="display: none;">
                                <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Task Report Filters</h3>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Status</label>
                                        <select class="form-select" id="reportStatus">
                                            <option value="">All</option>
                                            <option value="pending">Pending</option>
                                            <option value="in-progress">In Progress</option>
                                            <option value="completed">Completed</option>
                                            <option value="overdue">Overdue</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Priority</label>
                                        <select class="form-select" id="reportPriority">
                                            <option value="">All</option>
                                            <option value="High">High</option>
                                            <option value="Medium">Medium</option>
                                            <option value="Low">Low</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Category</label>
                                        <select class="form-select" id="reportCategory">
                                            <option value="">All</option>
                                            <option value="Daily Bar Duties">Daily Bar Duties</option>
                                            <option value="Staff Training">Staff Training</option>
                                            <option value="Management Duties">Management Duties</option>
                                            <option value="Maintenance">Maintenance</option>
                                            <option value="Cleaning">Cleaning</option>
                                            <option value="Inventory">Inventory</option>
                                            <option value="Customer Service">Customer Service</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Assigned To</label>
                                        <select class="form-select" id="reportAssignedTo">
                                            <option value="">All</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Date From</label>
                                        <input type="date" class="form-input" id="reportDateFrom">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Date To</label>
                                        <input type="date" class="form-input" id="reportDateTo">
                                    </div>
                                </div>
                            </div>
                            
                            <div id="userReportOptions" style="display: none;">
                                <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">User Selection</h3>
                                
                                <div class="form-group">
                                    <label class="form-label required">Select User</label>
                                    <select class="form-select" id="reportUserId" required>
                                        <option value="">Select a user</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Date From</label>
                                        <input type="date" class="form-input" id="userReportDateFrom">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Date To</label>
                                        <input type="date" class="form-input" id="userReportDateTo">
                                    </div>
                                </div>
                            </div>
                            
                            <div id="summaryReportOptions" style="display: none;">
                                <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Summary Report Options</h3>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Date From</label>
                                        <input type="date" class="form-input" id="summaryReportDateFrom">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Date To</label>
                                        <input type="date" class="form-input" id="summaryReportDateTo">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                                        <input type="checkbox" id="includeUserStats" checked>
                                        Include User Statistics
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                                        <input type="checkbox" id="includeCategoryBreakdown" checked>
                                        Include Category Breakdown
                                    </label>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-lg" style="margin-top: 2rem;">
                                <i class="fas fa-file-pdf"></i>
                                Generate PDF Report
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Users View (Management Only) -->
<!-- Stock/Inventory View -->
            <div id="stockView" class="view-content hidden">
                <div class="view-header">
                    <h2><i class="fas fa-boxes"></i> Stock & Inventory Management</h2>
                    <div class="view-actions">
                        <button class="btn btn-secondary" id="refreshStockBtn">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button class="btn btn-primary" id="addStockItemBtn">
                            <i class="fas fa-plus"></i> Add Stock Item
                        </button>
                        <button class="btn btn-success" id="newDeliveryBtn">
                            <i class="fas fa-truck"></i> New Delivery
                        </button>
                    </div>
                </div>

                <!-- Stock Summary Cards -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--primary-color);">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalStockItems">0</div>
                            <div class="stat-label">Total Items</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--warning-color);">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="lowStockItems">0</div>
                            <div class="stat-label">Low Stock</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--danger-color);">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="outOfStockItems">0</div>
                            <div class="stat-label">Out of Stock</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--info-color);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="expiringBatches">0</div>
                            <div class="stat-label">Expiring Soon</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--success-color);">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalStockValue">$0</div>
                            <div class="stat-label">Total Value</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--secondary-color);">
                            <i class="fas fa-truck-loading"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="pendingDeliveries">0</div>
                            <div class="stat-label">Pending Deliveries</div>
                        </div>
                    </div>
                </div>

                <!-- Tabs for different views -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="stock-items">
                        <i class="fas fa-list"></i> Stock Items
                    </button>
                    <button class="tab-btn" data-tab="deliveries">
                        <i class="fas fa-truck"></i> Deliveries
                    </button>
                    <button class="tab-btn" data-tab="alerts">
                        <i class="fas fa-bell"></i> Alerts
                        <span class="badge" id="alertsBadge" style="display: none;">0</span>
                    </button>
                    <button class="tab-btn" data-tab="reports">
                        <i class="fas fa-chart-bar"></i> Reports
                    </button>
                </div>

                <!-- Stock Items Tab -->
                <div id="stock-items-tab" class="tab-content active">
                    <div class="filters-bar" style="margin-bottom: 1rem;">
                        <select id="stockCategoryFilter" class="form-select" style="width: 200px;">
                            <option value="">All Categories</option>
                        </select>
                        <select id="stockStatusFilter" class="form-select" style="width: 200px;">
                            <option value="">All Status</option>
                            <option value="ok">In Stock</option>
                            <option value="low">Low Stock</option>
                            <option value="out">Out of Stock</option>
                        </select>
                        <input type="text" id="stockSearchInput" class="form-input" placeholder="Search items..." style="width: 300px;">
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Category</th>
                                    <th>SKU</th>
                                    <th>Current Stock</th>
                                    <th>Min/Max</th>
                                    <th>Unit Cost</th>
                                    <th>Total Value</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="stockItemsTableBody">
                                <tr>
                                    <td colspan="9" class="text-center">Loading stock items...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Deliveries Tab -->
                <div id="deliveries-tab" class="tab-content">
                    <div class="filters-bar" style="margin-bottom: 1rem;">
                        <select id="deliveryStatusFilter" class="form-select" style="width: 200px;">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="accepted">Accepted</option>
                            <option value="rejected">Rejected</option>
                        </select>
                        <input type="date" id="deliveryFromDate" class="form-input" style="width: 180px;">
                        <input type="date" id="deliveryToDate" class="form-input" style="width: 180px;">
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Delivery Date</th>
                                    <th>Supplier</th>
                                    <th>Invoice #</th>
                                    <th>Amount</th>
                                    <th>Items</th>
                                    <th>Status</th>
                                    <th>Received By</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="deliveriesTableBody">
                                <tr>
                                    <td colspan="8" class="text-center">Loading deliveries...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Alerts Tab -->
                <div id="alerts-tab" class="tab-content">
                    <div class="filters-bar" style="margin-bottom: 1rem;">
                        <select id="alertTypeFilter" class="form-select" style="width: 200px;">
                            <option value="">All Types</option>
                            <option value="low_stock">Low Stock</option>
                            <option value="out_of_stock">Out of Stock</option>
                            <option value="expiring_soon">Expiring Soon</option>
                            <option value="expired">Expired</option>
                        </select>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="showAcknowledgedAlerts">
                            <span>Show Acknowledged</span>
                        </label>
                    </div>

                    <div id="alertsList" class="alerts-list">
                        <p class="text-center">Loading alerts...</p>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div id="reports-tab" class="tab-content">
                    <div class="report-cards">
                        <div class="report-card">
                            <h3><i class="fas fa-chart-line"></i> Stock Valuation Report</h3>
                            <p>View total stock value by category and item</p>
                            <button class="btn btn-primary" id="generateValuationReport">
                                <i class="fas fa-file-pdf"></i> Generate Report
                            </button>
                        </div>
                        <div class="report-card">
                            <h3><i class="fas fa-history"></i> Stock Movement Report</h3>
                            <p>Track stock movements and transactions</p>
                            <button class="btn btn-primary" id="generateMovementReport">
                                <i class="fas fa-file-pdf"></i> Generate Report
                            </button>
                        </div>
                        <div class="report-card">
                            <h3><i class="fas fa-exclamation-triangle"></i> Expiry Report</h3>
                            <p>View items expiring within 30 days</p>
                            <button class="btn btn-primary" id="generateExpiryReport">
                                <i class="fas fa-file-pdf"></i> Generate Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>            <div id="usersView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">Users</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="createUserBtn">
                            <i class="fas fa-user-plus"></i>
                            Add User
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div id="usersList">
                            <div class="empty-state">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Permissions View (Admin Only) -->
            <div id="permissionsView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">User Permissions</h1>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Manage User Permissions</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">Select User</label>
                            <select class="form-select" id="permissionUserId">
                                <option value="">Select a user</option>
                            </select>
                        </div>
                        
                        <div id="permissionsContent" style="display: none;">
                            <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Role-Based Permissions</h3>
                            <div id="rolePermissionsList" class="mb-3"></div>
                            
                            <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Custom Permissions</h3>
                            <div id="customPermissionsList"></div>
                            
                            <button class="btn btn-primary mt-3" id="addPermissionBtn">
                                <i class="fas fa-plus"></i>
                                Add Custom Permission
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings View -->
            <div id="settingsView" class="view-content hidden">
                <div class="page-header">
                    <h1 class="page-title">Settings</h1>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Appearance</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">Theme</label>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <button type="button" class="btn btn-secondary" id="lightModeBtn">
                                    <i class="fas fa-sun"></i>
                                    Light Mode
                                </button>
                                <button type="button" class="btn btn-secondary" id="darkModeBtn">
                                    <i class="fas fa-moon"></i>
                                    Dark Mode
                                </button>
                            </div>
                            <p class="form-help mt-1">Choose your preferred theme. Your selection will be saved.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Change Password</h2>
                    </div>
                    <div class="card-body">
                        <form id="changePasswordForm" style="max-width: 500px;">
                            <div class="form-group">
                                <label for="currentPassword" class="form-label required">Current Password</label>
                                <input type="password" id="currentPassword" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="newPassword" class="form-label required">New Password</label>
                                <input type="password" id="newPassword" class="form-input" required minlength="6">
                                <p class="form-help">Password must be at least 6 characters</p>
                            </div>
                            
                            <div class="form-group">
                                <label for="confirmPassword" class="form-label required">Confirm New Password</label>
                                <input type="password" id="confirmPassword" class="form-input" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i>
                                Change Password
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Create/Edit Task Modal -->
    <div id="taskModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="taskModalTitle">Create Task</h2>
                <button class="modal-close" id="closeTaskModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="taskId">
                    
                    <div class="form-group">
                        <label for="taskTitle" class="form-label required">Title</label>
                        <input type="text" id="taskTitle" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskDescription" class="form-label">Description</label>
                        <textarea id="taskDescription" class="form-textarea"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskCategory" class="form-label required">Category</label>
                            <select id="taskCategory" class="form-select" required>
                                <option value="">Select category</option>
                                <option value="Daily Bar Duties">Daily Bar Duties</option>
                                <option value="Staff Training">Staff Training</option>
                                <option value="Management Duties">Management Duties</option>
                                <option value="Maintenance">Maintenance</option>
                                <option value="Cleaning">Cleaning</option>
                                <option value="Inventory">Inventory</option>
                                <option value="Customer Service">Customer Service</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="taskPriority" class="form-label required">Priority</label>
                            <select id="taskPriority" class="form-select" required>
                                <option value="">Select priority</option>
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskAssignmentType" class="form-label required">Assignment Type</label>
                        <select id="taskAssignmentType" class="form-select" required>
                            <option value="">Select type</option>
                            <option value="individual">Assign to Individual</option>
                            <option value="shift-based">Assign to Shift/Day</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="assignedToGroup" style="display: none;">
                        <label for="taskAssignedTo" class="form-label required">Assign To</label>
                        <select id="taskAssignedTo" class="form-select">
                            <option value="">Select user</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="assignedDateGroup" style="display: none;">
                        <label for="taskAssignedDate" class="form-label required">Shift Date</label>
                        <input type="date" id="taskAssignedDate" class="form-input">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taskDueDate" class="form-label">Due Date</label>
                            <input type="date" id="taskDueDate" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label for="taskDueTime" class="form-label">Due Time</label>
                            <input type="time" id="taskDueTime" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="taskRecurrence" class="form-label">Recurrence</label>
                        <select id="taskRecurrence" class="form-select">
                            <option value="none">None</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelTaskBtn">Cancel</button>
                <button class="btn btn-primary" id="saveTaskBtn">
                    <i class="fas fa-save"></i>
                    Save Task
                </button>
            </div>
        </div>
    </div>
    
    <!-- Task Details Modal -->
    <div id="taskDetailsModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Task Details</h2>
                <button class="modal-close" id="closeTaskDetailsModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="taskDetailsContent">
                <!-- Task details will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeDetailsBtn">Close</button>
                <button class="btn btn-success" id="completeTaskBtn" style="display: none;">
                    <i class="fas fa-check"></i>
                    Mark Complete
                </button>
            </div>
        </div>
    </div>
    
    <!-- Complete Task Modal -->
    <div id="completeTaskModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Complete Task</h2>
                <button class="modal-close" id="closeCompleteModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="completeTaskForm">
                    <input type="hidden" id="completeTaskId">
                    
                    <div class="form-group">
                        <label for="completionNotes" class="form-label">Completion Notes</label>
                        <textarea id="completionNotes" class="form-textarea" placeholder="Add any notes about completing this task..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="completionPhoto" class="form-label">Photo (optional)</label>
                        <input type="file" id="completionPhoto" class="form-input" accept="image/*">
                        <p class="form-help">Upload a photo as proof of completion</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelCompleteBtn">Cancel</button>
                <button class="btn btn-success" id="submitCompleteBtn">
                    <i class="fas fa-check"></i>
                    Complete Task
                </button>
            </div>
        </div>
    </div>
    
    <!-- Create User Modal -->
    <div id="userModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="userModalTitle">Create User</h2>
                <button class="modal-close" id="closeUserModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId">
                    
                    <div class="form-group">
                        <label for="userUsername" class="form-label required">Username</label>
                        <input type="text" id="userUsername" class="form-input" required>
                    </div>
                    
                    <div class="form-group" id="passwordGroup">
                        <label for="userPassword" class="form-label required">Password</label>
                        <input type="password" id="userPassword" class="form-input" required minlength="6">
                        <p class="form-help">Password must be at least 6 characters</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="userFullName" class="form-label required">Full Name</label>
                        <input type="text" id="userFullName" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="userEmail" class="form-label">Email</label>
                        <input type="email" id="userEmail" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="userPhone" class="form-label">Phone</label>
                        <input type="tel" id="userPhone" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="userRole" class="form-label required">Role</label>
                        <select id="userRole" class="form-select" required>
                            <option value="">Select role</option>
                            <option value="admin">Admin</option>
                            <option value="manager">Manager</option>
                            <option value="supervisor">Supervisor</option>
                            <option value="bar_staff">Bar Staff</option>
                            <option value="cleaner">Cleaner</option>
                            <option value="employee">Employee</option>
                        </select>
                        <p class="form-help">
                            <strong>Admin:</strong> Full system access<br>
                            <strong>Manager:</strong> Manage tasks, users, schedules, reports<br>
                            <strong>Supervisor:</strong> Create tasks, view reports<br>
                            <strong>Bar Staff:</strong> View and complete assigned tasks<br>
                            <strong>Cleaner:</strong> View and complete assigned tasks<br>
                            <strong>Employee:</strong> Basic task access
                        </p>
                    </div>
                    
                    <div class="form-group" id="customPermissionsGroup" style="display: none;">
                        <label class="form-label">Custom Permissions (Optional)</label>
                        <p class="form-help mb-2">Select additional permissions beyond the role defaults:</p>
                        <div id="permissionCheckboxes" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: 1rem;">
                            <!-- Permission checkboxes will be loaded here -->
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelUserBtn">Cancel</button>
                <button class="btn btn-primary" id="saveUserBtn">
                    <i class="fas fa-save"></i>
                    Save User
                </button>
            </div>
        </div>
    </div>
    
    <!-- Add Permission Modal -->
    <div id="addPermissionModal" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Add Custom Permission</h2>
                <button class="modal-close" id="closeAddPermissionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addPermissionForm">
                    <div class="form-group">
                        <label for="permissionSelect" class="form-label required">Permission</label>
                        <select id="permissionSelect" class="form-select" required>
                            <option value="">Select permission</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAddPermissionBtn">Cancel</button>
                <button class="btn btn-primary" id="savePermissionBtn">
                    <i class="fas fa-plus"></i>
                    Add Permission
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
<!-- Stock Item Modal -->
    <div id="stockItemModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="stockItemModalTitle">Add Stock Item</h3>
                <button class="modal-close" id="closeStockItemModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="stockItemForm">
                    <input type="hidden" id="stockItemId">
                    
                    <div class="form-row">
                        <div class="form-group" style="flex: 2;">
                            <label for="stockItemName" class="form-label required">Item Name</label>
                            <input type="text" id="stockItemName" class="form-input" required>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="stockItemSKU" class="form-label">SKU</label>
                            <input type="text" id="stockItemSKU" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="stockItemCategory" class="form-label required">Category</label>
                            <select id="stockItemCategory" class="form-select" required>
                                <option value="">Select category</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="stockItemUnit" class="form-label required">Unit</label>
                            <select id="stockItemUnit" class="form-select" required>
                                <option value="">Select unit</option>
                                <option value="bottles">Bottles</option>
                                <option value="cases">Cases</option>
                                <option value="kegs">Kegs</option>
                                <option value="kg">Kilograms</option>
                                <option value="liters">Liters</option>
                                <option value="boxes">Boxes</option>
                                <option value="packs">Packs</option>
                                <option value="jars">Jars</option>
                                <option value="bunches">Bunches</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="stockItemSupplier" class="form-label">Supplier</label>
                        <input type="text" id="stockItemSupplier" class="form-input">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="stockItemMinQty" class="form-label">Minimum Quantity</label>
                            <input type="number" id="stockItemMinQty" class="form-input" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="stockItemMaxQty" class="form-label">Maximum Quantity</label>
                            <input type="number" id="stockItemMaxQty" class="form-input" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="stockItemUnitCost" class="form-label">Unit Cost ($)</label>
                            <input type="number" id="stockItemUnitCost" class="form-input" step="0.01" min="0" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="stockItemNotes" class="form-label">Notes</label>
                        <textarea id="stockItemNotes" class="form-textarea" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelStockItemBtn">Cancel</button>
                <button class="btn btn-primary" id="saveStockItemBtn">
                    <i class="fas fa-save"></i> Save Item
                </button>
            </div>
        </div>
    </div>

    <!-- Delivery Modal -->
    <div id="deliveryModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 id="deliveryModalTitle">New Delivery</h3>
                <button class="modal-close" id="closeDeliveryModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="deliveryForm">
                    <input type="hidden" id="deliveryId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="deliveryDate" class="form-label required">Delivery Date</label>
                            <input type="date" id="deliveryDate" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="deliverySupplier" class="form-label required">Supplier</label>
                            <input type="text" id="deliverySupplier" class="form-input" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="deliveryInvoiceNumber" class="form-label">Invoice Number</label>
                            <input type="text" id="deliveryInvoiceNumber" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="deliveryInvoiceAmount" class="form-label">Invoice Amount ($)</label>
                            <input type="number" id="deliveryInvoiceAmount" class="form-input" step="0.01" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="deliveryNotes" class="form-label">Notes</label>
                        <textarea id="deliveryNotes" class="form-textarea" rows="2"></textarea>
                    </div>

                    <hr style="margin: 1.5rem 0;">

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h4>Delivery Items</h4>
                        <button type="button" class="btn btn-secondary btn-sm" id="addDeliveryItemBtn">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>

                    <div id="deliveryItemsList">
                        <!-- Delivery items will be added here dynamically -->
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeliveryBtn">Cancel</button>
                <button class="btn btn-primary" id="saveDeliveryBtn">
                    <i class="fas fa-save"></i> Save Delivery
                </button>
            </div>
        </div>
    </div>

    <!-- Accept Delivery Modal -->
    <div id="acceptDeliveryModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>Accept Delivery</h3>
                <button class="modal-close" id="closeAcceptDeliveryModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="acceptDeliveryInfo" style="background: var(--background-secondary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1.5rem;">
                    <!-- Delivery info will be populated here -->
                </div>

                <h4 style="margin-bottom: 1rem;">Verify Items</h4>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    Check each item and enter the actual received quantity. Mark any damaged items.
                </p>

                <div id="acceptDeliveryItemsList">
                    <!-- Items will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAcceptDeliveryBtn">Cancel</button>
                <button class="btn btn-danger" id="rejectDeliveryBtn">
                    <i class="fas fa-times"></i> Reject Delivery
                </button>
                <button class="btn btn-success" id="confirmAcceptDeliveryBtn">
                    <i class="fas fa-check"></i> Accept Delivery
                </button>
            </div>
        </div>
    </div>

    <!-- Stock Adjustment Modal -->
    <div id="stockAdjustmentModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Adjust Stock</h3>
                <button class="modal-close" id="closeStockAdjustmentModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="stockAdjustmentForm">
                    <input type="hidden" id="adjustmentStockItemId">
                    
                    <div id="adjustmentItemInfo" style="background: var(--background-secondary); padding: 1rem; border-radius: var(--radius-md); margin-bottom: 1.5rem;">
                        <!-- Item info will be populated here -->
                    </div>

                    <div class="form-group">
                        <label for="adjustmentType" class="form-label required">Adjustment Type</label>
                        <select id="adjustmentType" class="form-select" required>
                            <option value="adjustment">Manual Adjustment</option>
                            <option value="usage">Usage</option>
                            <option value="waste">Waste/Spoilage</option>
                            <option value="return">Return to Supplier</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="adjustmentQuantity" class="form-label required">Quantity Change</label>
                        <input type="number" id="adjustmentQuantity" class="form-input" step="0.01" required>
                        <p class="form-help">Enter positive number to add, negative to subtract</p>
                    </div>

                    <div class="form-group">
                        <label for="adjustmentReason" class="form-label required">Reason</label>
                        <textarea id="adjustmentReason" class="form-textarea" rows="3" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAdjustmentBtn">Cancel</button>
                <button class="btn btn-primary" id="saveAdjustmentBtn">
                    <i class="fas fa-save"></i> Save Adjustment
                </button>
            </div>
        </div>
    </div>

    <!-- View Stock Details Modal -->
    <div id="stockDetailsModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="stockDetailsTitle">Stock Details</h3>
                <button class="modal-close" id="closeStockDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="stockDetailsContent">
                    <!-- Details will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="closeStockDetailsBtn">Close</button>
            </div>
        </div>
    </div>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>    <div id="toastContainer" class="toast-container"></div>
    
    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/stock.js"></script>
</body>
</html>