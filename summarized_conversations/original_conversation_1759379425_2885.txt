{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="backend/routes/notifications.js">\nconst express = require(\'express\');\nconst { authenticateToken } = require(\'../auth\');\n\nfunction createNotificationRoutes(db, io) {\n    const router = express.Router();\n    \n    // Get user notifications\n    router.get(\'/\', authenticateToken, (req, res) => {\n        try {\n            const unreadOnly = req.query.unread === \'true\';\n            const notifications = db.getUserNotifications(req.user.id, unreadOnly);\n            res.json(notifications);\n        } catch (error) {\n            console.error(\'Get notifications error:\', error);\n            res.status(500).json({ error: \'Failed to get notifications\' });\n        }\n    });\n    \n    // Mark notification as read\n    router.patch(\'/:id/read\', authenticateToken, (req, res) => {\n        try {\n            db.markNotificationRead(req.params.id);\n            res.json({ message: \'Notification marked as read\' });\n        } catch (error) {\n            console.error(\'Mark notification read error:\', error);\n            res.status(500).json({ error: \'Failed to mark notification as read\' });\n        }\n    });\n    \n    // Mark all notifications as read\n    router.post(\'/read-all\', authenticateToken, (req, res) => {\n        try {\n            db.markAllNotificationsRead(req.user.id);\n            res.json({ message: \'All notifications marked as read\' });\n        } catch (error) {\n            console.error(\'Mark all notifications read error:\', error);\n            res.status(500).json({ error: \'Failed to mark all notifications as read\' });\n        }\n    });\n    \n    return router;\n}\n\nmodule.exports = createNotificationRoutes;\n</create-file>\n</function_calls>'}